meta {
  name: Create Task
  type: http
  seq: 2
}

post {
  url: http://localhost:3000/api/tasks
  body: json
  auth: inherit
}

headers {
  Authorization: Bearer test-token
}

body:json {
  {
    "requestId": "req-abc",
    "assigneeId": "uuid-1234",
    "resourceAllocations": [
      {
        "resourceId": "res-001",
        "quantity": 100
      }
    ]
  }
}

tests {
  test("should create task successfully", function() {
    expect(res.getStatus()).to.equal(201);
    expect(res.getBody()).to.have.property('taskId');
    expect(res.getBody()).to.have.property('createdAt');
    expect(res.getBody().taskId).to.match(/^task-/);
    
    // Store taskId for other tests
    bru.setEnvVar('taskId', res.getBody().taskId);
  });
}